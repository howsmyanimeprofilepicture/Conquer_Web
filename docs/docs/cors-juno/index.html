<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cors-juno">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.22">
<title data-rh="true">CORS (Cross-Origin Resource Sharing) | Conquer WEB</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://howsmyanimeprofilepicture.github.io//Conquer_Web/docs/cors-juno"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="CORS (Cross-Origin Resource Sharing) | Conquer WEB"><meta data-rh="true" name="description" content="1. 😅 첫 만남"><meta data-rh="true" property="og:description" content="1. 😅 첫 만남"><link data-rh="true" rel="icon" href="/Conquer_Web/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://howsmyanimeprofilepicture.github.io//Conquer_Web/docs/cors-juno"><link data-rh="true" rel="alternate" href="https://howsmyanimeprofilepicture.github.io//Conquer_Web/docs/cors-juno" hreflang="en"><link data-rh="true" rel="alternate" href="https://howsmyanimeprofilepicture.github.io//Conquer_Web/docs/cors-juno" hreflang="x-default"><link rel="stylesheet" href="/Conquer_Web/assets/css/styles.2667880a.css">
<link rel="preload" href="/Conquer_Web/assets/js/runtime~main.eb7d43c4.js" as="script">
<link rel="preload" href="/Conquer_Web/assets/js/main.66d1566b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Conquer_Web/"><div class="navbar__logo"><img src="/Conquer_Web/img/logo.svg" alt="My Meta Project Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/Conquer_Web/img/logo.svg" alt="My Meta Project Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Conquer Web</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Conquer_Web/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/fuggedaboutit/Conquer_Web" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/웹표준과 웹접근성">웹표준과 웹접근성</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/Web Standards-Accessibility">Web Standards and Acessibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/UTF-8-woori">UTF-8</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/ASCII-UNICODE-by-Bohyun">문자를 표현하는 방법</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/https_vs_http-Hong">1.HTTP vs HTTPS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/HTTPvsHTTPS-by_Manju">HTTP vs HTTPS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/header &amp; caching">Header &amp; Caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/http_header_cache-hong-">Header</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/REST-API-by-Bohyun">REST API란</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/rest-api">Rest API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/Conquer_Web/docs/cors-juno">CORS (Cross-Origin Resource Sharing)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/CORS-by-woori">CORS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/Jpeg-Png-Gif-Svg-Webp_hong">1. 벡터 vs 래스터</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/Jpeg-Png-Gif-Svg-Webp-Bohyun">JPEG PNG GIF SVG WEBP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/Semantic-Markup-by-Juno-">Semantic Markup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/Semantic-markup-woori">Semantic Markup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/Throttling-Debouncing">Throttling &amp; Debouncing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/Throttling-Debouncing-by_manju">Throttling and Debouncing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/Lazy-Loading-and-Infinite-Scrolling-Bohyun">Image Lazy Loading &amp; Infinite Scrolling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/Lazy-Loading-and-Infinite-Scrolling-Manju">Lazy Loading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/bundling-webpack">webpack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/bundling-webpack-by-Juno">bundling and webpack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/Code_Spliting">Code Spliting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Conquer_Web/docs/">Conquer Web 🤪</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Conquer_Web/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">CORS (Cross-Origin Resource Sharing)</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>CORS (Cross-Origin Resource Sharing)</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1--첫-만남"><strong>1. 😅 첫 만남</strong><a class="hash-link" href="#1--첫-만남" title="Direct link to heading">​</a></h2><p>리액트를 사용한 프로젝트를 만들어보고자 하였고 코로나 관련 API를 사용하기로 하였다.</p><p>두곳의 API를 사용하기로 하였고 그중 국내 현황은 <a href="https://api.corona-19.kr/" target="_blank" rel="noopener noreferrer">굿바이코로나</a> 에서 키를 발급받고 postman에 테스트를 해보았다.</p><p><img loading="lazy" src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FHbCer%2FbtqURufOH9K%2FusjZX4CSZn68IYPmGoHAK1%2Fimg.png" alt="img" class="img_ev3q"></p><p>api 데이터 테스트를 해보니 문제가 없이 나오는걸 확인하였다. 이후 react에서 데이터를 불러보았습니다.</p><p><img loading="lazy" src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbZ0pnc%2FbtqUYGZ4ruc%2FJP8iC8fSSnOYCeSfTxUsk0%2Fimg.png" alt="img" class="img_ev3q"></p><p>두근두근</p><p><img loading="lazy" src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FNi79A%2FbtqUSqqJ1qm%2F7oOiRPgKUh8vIXH80OlLTk%2Fimg.jpg" alt="img" class="img_ev3q"></p><p>두근두근</p><p><img loading="lazy" src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcI5Jyw%2FbtqUYGsdCjD%2FlsAIDqmXc3pNxujXKIMeQK%2Fimg.jpg" alt="img" class="img_ev3q"></p><p>sigh..</p><p>이러한 문제의 원인과 해결을 위해 웹생태계의 다른 출처로 리소스 요청을 제한하는 것과 관련된 두가지 정책인</p><p><strong>CORS</strong>와 <strong>SOP</strong>에대해서 알아보도록 하겠습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2--sopsame-origin-policy-"><strong>2. 🙄 SOP(Same-Origin Policy) ?</strong><a class="hash-link" href="#2--sopsame-origin-policy-" title="Direct link to heading">​</a></h2><p>자바스크립트(<code>XMLHttpRequest</code>)로 다른 웹페이지에 접근할때 같은 출처의 페이지만 접근가능하다. 이때의 정책이 <strong>동일 출처 정책(SOP)</strong> 이다.</p><p><strong>SOP</strong>는 어떤 출처에서 불러온 문서나 스크립트가 다른 출처에서 가져온 리소스와 상호작용하는것을 제한하는 중요한 보안정책이다.</p><p>여기서 동일 출처의 기준은 요청과 응답의 <strong>프로토콜</strong>, <strong>호스트</strong>, <strong>포트</strong> 세개가 모두 같다는것이다.</p><p>하지만 포트는 기본 포트번호가 정해져있기 때문에 생략이 가능합니다.</p><p><a href="https://tools.ietf.org/html/rfc2616#section-3.2.2" target="_blank" rel="noopener noreferrer">참고문서</a></p><blockquote><p>3.3.2 http URL</p><p>…<br>
<!-- -->If the port is empty or not given, port 80 is assumed. The semantics are that the identified resource is located at the server listening for TCP connections on that port of that host, and the Request-URI for the resource is abs_path (section 5.1.2).<br>
<!-- -->…</p></blockquote><p><img loading="lazy" src="https://evan-moon.github.io/static/e25190005d12938c253cc72ca06777b1/6af66/uri-structure.png" alt="img" class="img_ev3q"></p><ul><li><a href="https://baegofda.kr" target="_blank" rel="noopener noreferrer">https://baegofda.kr</a> - 기본 도메인</li><li><a href="https://baegofda.kr/bookmark" target="_blank" rel="noopener noreferrer">https://baegofda.kr/bookmark</a> - 프로토콜, 호스트, 포트가 동일하니 O</li><li><a href="http://baegofda.kr" target="_blank" rel="noopener noreferrer">http://baegofda.kr</a> - 프로토콜이 다르니 X</li><li><a href="https://api.baegofda.kr" target="_blank" rel="noopener noreferrer">https://api.baegofda.kr</a> - 호스트가 다름 X</li><li><a href="https://baegofda.kr:8080" target="_blank" rel="noopener noreferrer">https://baegofda.kr:8080</a> - 포트까지 동일해야하나 <strong>대부분</strong>은 포트가 달라도 생략이 가능하여 같다고 인식힌다. (예외 : <strong>IE</strong>)</li></ul><p><img loading="lazy" src="https://evan-moon.github.io/static/a21288d9ab75a6714b1f5a752d171ce4/c08c5/ie_is_trash.jpg" alt="img" class="img_ev3q"></p><p>이젠 안녕 ~!</p><p>하지만 <strong>SOP</strong>를 우회에서 서로 다른 도메인간에 통신을 할수있게 해줄 무언가가 필요했고 때문에 만든 해결책이 JSONP, ReverseProxy, FlashSocket등이 있다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3--corscross-originresource-sharing-"><strong>3. 🤔 CORS(Cross-OriginResource Sharing) ?</strong><a class="hash-link" href="#3--corscross-originresource-sharing-" title="Direct link to heading">​</a></h2><p><strong>CORS</strong> 즉, <strong>교차 출처 자원 공유</strong>는 웹브라우저에서 외부 도메인 서버와 통신하기위한 방식을 표준화한 스펙이다.</p><p>서버와 클라이언트가 정해진 헤더를 통해 서로 요청이나 응답에 반응할지 말지 결정하는 방식이다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-1--cors의-등장-배경"><strong>3-1. 👍 CORS의 등장 배경</strong><a class="hash-link" href="#3-1--cors의-등장-배경" title="Direct link to heading">​</a></h3><hr><p>크로스도메인 이슈를 해결하는 표준의 필요성이 대두되며 W3C에서 권장사항으로 CORS사양을 발표하였다.</p><blockquote><p>현재 화발하게 유지 관리되는 사양은 <strong>WHATWG</strong>의 <strong>Fetch Living Standard</strong>이다.</p><p><a href="https://fetch.spec.whatwg.org/" target="_blank" rel="noopener noreferrer">참고문서</a></p></blockquote><p>또한 crsf, xss와 같은 해커들의 공격에 대응하기 위해서라도 등장이 필요한 시점이였다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-2--cors의-시나리오"><strong>3-2. 🙏 CORS의 시나리오</strong><a class="hash-link" href="#3-2--cors의-시나리오" title="Direct link to heading">​</a></h3><hr><p>먼저 request에 <strong>Origin</strong> 이라는 헤더가있고 response에 <strong>Access-Control-Allow-Origin</strong> 이라는 헤더가있는데 이 두가지가 같을 경우 같은출처라고 인식한다는 것을 알고 갑시다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-2-1-preflight-request"><strong>3-2-1. Preflight Request</strong><a class="hash-link" href="#3-2-1-preflight-request" title="Direct link to heading">​</a></h4><p><strong>프리플라이트(Preflight Request)</strong> 가장 일반적으로 마주치는 시나리오이다.</p><p>JS에서 Fetch로 요청을하면 options을 통해 예비요청을 보내고 본요청을 보내며 헤더에 출처를 같이 보냅니다.</p><blockquote><p>access-control-request-method : GET<br>
<!-- -->access-control-request-headers: content-type<br>
<!-- -->origin</p></blockquote><p>이후 서버는 response에 <strong>Access-Control-Allow-Origin</strong>으로 응답합니다.</p><p><img loading="lazy" src="https://beomy.github.io/assets/img/posts/browser/cors_preflight_request.png" alt="img" class="img_ev3q"></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> headers </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;text/xml&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://evanmoon.tistory.com/rss&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> headers </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">OPTIONS https://evanmoon.tistory.com/rss</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Accept: */*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Accept-Encoding: gzip, deflate, br</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Accept-Language: en-US,en;q=0.9,ko;q=0.8,ja;q=0.7,la;q=0.6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Access-Control-Request-Headers: content-type</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Access-Control-Request-Method: GET</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Connection: keep-alive</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Host: evanmoon.tistory.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Origin: https://evan-moon.github.io</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Referer: https://evan-moon.github.io/2020/05/21/about-cors/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sec-Fetch-Dest: empty</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sec-Fetch-Mode: cors</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sec-Fetch-Site: cross-site</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위와같이 요청을 보면 단순 <strong>Origin</strong>에 대한 정보 뿐만아니라 예비요청이후 본요청때 같이 보낼 정보가 포함되있음을 볼 수 있다.</p><p>이 예비요청에 <strong>Access-Control-Request-Headers</strong> 를 사용하여 자신이 본 요청에서 <strong>Content-Type</strong> 헤더를 사용할 것을 알려주거나,</p><p><strong>Access-Control-Request-Method</strong>를 사용하여 이후 <strong>GET</strong> 메소드를 사용할 것을 서버에게 미리 알려주고 있는 것이다.</p><div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">OPTIONS https://evanmoon.tistory.com/rss 200 OK</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Access-Control-Allow-Origin: https://evanmoon.tistory.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Encoding: gzip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Length: 699</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Type: text/xml; charset=utf-8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Date: Sun, 24 May 2020 11:52:33 GMT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">P3P: CP=&#x27;ALL DSP COR MON LAW OUR LEG DEL&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Server: Apache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Vary: Accept-Encoding</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">X-UA-Compatible: IE=Edge</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 부분은 서버사이드 영역이 아닌 브라우저 영역에서 판단하기 때문에 서버는 200대의 성공코드를 반환하나</p><p>브라우저에서는 에러를 보여준다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-2-2-simple-request"><strong>3-2-2. Simple Request</strong><a class="hash-link" href="#3-2-2-simple-request" title="Direct link to heading">​</a></h4><p>이 시나리오는 예비요청이 없으며 본요청만 있고, 직접 볼수는 없다.</p><p>![img]<a href="https://evan-moon.github.io/static/d8ed6519e305c807c687032ff61240f8/6af66/simple-request.png" target="_blank" rel="noopener noreferrer">https://evan-moon.github.io/static/d8ed6519e305c807c687032ff61240f8/6af66/simple-request.png</a>)</p><p>여기에는 조건이 존재하는데</p><ul><li><p>메소드는 get, head,post중 하나여야된다.</p></li><li><p>accept, accept-language, content-language, content-type, DPR,Downlink,Save-Data, Viewport-Width, Width를 제외한 헤더를 사용하면안된다.<br>
<!-- -->(이부분 때문에 인증관련의 jwt사용이 불가하다.)</p></li><li><p>content-type를 사용하는 경우 application/x-www-form-urlencoded, multipart/form-data, text/plain만 허용된다.
(현재는 Rest API를 사용하며 application/json을 사용하나 여기에는 해당하지 않기에 실질적으로 이부분은 보기 힘들다.)</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-2-3-credentialed-request"><strong>3-2-3. Credentialed Request</strong><a class="hash-link" href="#3-2-3-credentialed-request" title="Direct link to heading">​</a></h4><p><strong>CORS</strong>도 보안정책이나 여기서 보안을 더 강화 할 수 있다.</p><p>Fetch나 비동기는 기본적으로 쿠키를 담지 않기때문에 아래의 <strong>credentials</strong>옵션을 통하여 인증 보안을 강화한다.</p><ul><li><p>same-origin (기본값) : 같은 출처 간 요청에만 인증 정보를 담을 수 있다.</p></li><li><p>include : 모든 요청에 인증 정보를 담을 수 있다.</p></li><li><p>omit : 모든 요청에 인증 정보를 담지 않는다.</p></li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://evan-moon.github.io/feed.xml&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">credentials</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;include&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Credentials 옵션 변경!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>또한</p><ul><li><p>Access-Control-Allow-Origin에는 <!-- -->*<!-- -->(와일드카드)를 사용할수없으며 명시적 url을 사용해야함</p></li><li><p>응답헤더에는 Access-Control-Allow-Credentials:가 존재해야한다.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4--결론"><strong>4. 🎉 결론</strong><a class="hash-link" href="#4--결론" title="Direct link to heading">​</a></h2><p>서버사이드에서는 Access-Control-Allow-Origin이 내려올수있도록 세팅해줘야한다.</p><p>webpack dev server로 리버스 프록싱하여 우회가능하나 로컬에서만 가능하니 가장 좋은 방법은 서버개발자에게 요청한다.</p><p><a href="https://evan-moon.github.io/2020/05/21/about-cors/" target="_blank" rel="noopener noreferrer">참고</a></p><p><a href="https://www.youtube.com/watch?v=7iGIfcEsc2g" target="_blank" rel="noopener noreferrer">참고 : 우아테코톡</a></p><p><a href="https://velog.io/@wlsdud2194/cors" target="_blank" rel="noopener noreferrer">추천 - 리액트 &amp; nodejs(with CORS)</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/fuggedaboutit/Conquer_Web/docs/06-cors-juno.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Conquer_Web/docs/rest-api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Rest API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Conquer_Web/docs/CORS-by-woori"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CORS</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1--첫-만남" class="table-of-contents__link toc-highlight"><strong>1. 😅 첫 만남</strong></a></li><li><a href="#2--sopsame-origin-policy-" class="table-of-contents__link toc-highlight"><strong>2. 🙄 SOP(Same-Origin Policy) ?</strong></a></li><li><a href="#3--corscross-originresource-sharing-" class="table-of-contents__link toc-highlight"><strong>3. 🤔 CORS(Cross-OriginResource Sharing) ?</strong></a><ul><li><a href="#3-1--cors의-등장-배경" class="table-of-contents__link toc-highlight"><strong>3-1. 👍 CORS의 등장 배경</strong></a></li><li><a href="#3-2--cors의-시나리오" class="table-of-contents__link toc-highlight"><strong>3-2. 🙏 CORS의 시나리오</strong></a></li></ul></li><li><a href="#4--결론" class="table-of-contents__link toc-highlight"><strong>4. 🎉 결론</strong></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Conquer_Web/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/Conquer_Web/docs/doc2">Second Doc</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Conquer_Web/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.fb.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.fb.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/Conquer_Web/img/meta_opensource_logo_negative.svg" alt="Meta Open Source Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/Conquer_Web/img/meta_opensource_logo_negative.svg" alt="Meta Open Source Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Copyright © 2022 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/Conquer_Web/assets/js/runtime~main.eb7d43c4.js"></script>
<script src="/Conquer_Web/assets/js/main.66d1566b.js"></script>
</body>
</html>